# 1. 서버와 클라이언트

Node는 서버가 돌아가도록 실행을 도와줌(서버가 아님!!!)

- 클라이언트가 서버로 요청을 보냄
- 서버는 요청을 처리
- 처리 후 클라이언트로 응답을 보냄
- http로 요청과 응답을 주고 받는다.
- 서버에는 모두 포트가 있다.

Https 가 붙어 있으면 port가 443이다.(대부분)
http는 80이 생략되어 있다.

TCP/UDP 포트 번호(주로 사용되는) 알고 있으면 좋을듯 하다.

하나의 도메인에 다른 포트번호를 연결하면 다른 프로그램을 보여줄수 있다.

배포 : 남들에게 내 서버를 제공하는 행위

# 2. Rest API 만들기

## Rest API()

- 주소를 정하는 규칙이라고 생각하면 됨
- 서버의 자원을 정의하고 자원에 대한 주소를 지정하는 방법
- 팁 : 예측이 쉽다는건 보안에 취약할 수도 있다.

## HTTP 프로토콜

클라이언트가 누구든 서버와 HTTP 프로토콜로 소통 가능

- iOS, 안드로이드, 웹이 모두 같은 주소로 요청 보낼 수 있음
- 서버와 클라이언트의 분리

RESTful

- REST API를 사용한 주소 체계를 이용하는 서버
- GET/user는 사용자를 조회하는 요청, POST/user는 사용자를 등록하는 요청

# 3. 쿠키

## 1. 쿠키의 필요성

### 요청에는 한 가지 단점이 있다.

- 누가 요청을 보냈는지 모름(IP 주소와 브라우저 정도만 알 수 있다.)
- 로그인을 구현하면 됨
- 쿠키와 세션이 필요

### 쿠기: 키=값의 쌍

- 매 요청마다 서버에 동봉해서 보냄
- 서버는 쿠키를 읽어 누구인지 파악

### 쿠키 포함하기

- writeHead : 요청 헤더에 입력하는 메서드
- set-cookie : 브라우저에게 쿠키를 설정하라고 명령

# 4. 세션

중요한 정보는 서버에 가지고 있고 브라우저에는 키값만 보내는 방법

# 5. https, http2

## 1. https

### 웹 서버에 SSL 암호화를 추가하는 모듈

- 오고가는 데이터를 암호화해서 중간에 다른 사람이 요청을 가로챌 수 없도록 함
- 무료 https 인증서 발급처 : letsencrypt
- port : 443 (다른 포트도 가능은 하지만, 생략이 가능함)

  <br>

# 6. cluster

### 기본적으로 싱글 스레드인 노드가 CPU 코어를 모두 사용할 수 있게 해주는 모듈

- 포트를 공유하는 노드 프로세스를 여러 개 둘 수 있음
- 요청이 많이 들어왔을 때 병렬로 실행된 서버의 개수만큼 요청이 분산됨
- 서버에 무리가 덜 감
- 코어가 8개인 서버가 있을 때: 보통은 코어 하나만 활용
- cluster로 코어 하나당 노드 프로세스 하나를 배정 가능
- 성능이 8배가 되는 것은 아니지만 개선은 된다.
- 단점: 컴퓨터 자원(메모리, 세션등) 공유는 불가능함
- Redis등 별도 서버로 해결

### 마스터 프로세스와 워커프로세스(워커 스레드와 비슷함)
